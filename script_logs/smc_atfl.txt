#!/bin/bash

## usage ./smc_atfl 

#change directory to folder smc
cd /home/masagis/data/third_project/smc

#set chr as 27 to 28
#mapfile -t myChr < <(seq 27 28)

#Fleckvieh
for i in {27..28}; do docker run --rm -v $PWD:/mnt terhorst/smcpp:latest vcf2smc phased_$i.gt.vcf.gz phased-$i-atfl $i ATFL:fleckvieh_1,fleckvieh_10,fleckvieh_2,fleckvieh_3,fleckvieh_4,fleckvieh_5,fleckvieh_6,fleckvieh_7,fleckvieh_8,fleckvieh_9 --length 158534110 --missing-cutoff 20000000 ; done

#fit the model using estimate; timepoints 5000-0
#docker run --rm -v $PWD:/mnt terhorst/smcpp:latest estimate 1.25e-8 --timepoints 5000 0 atfl/phased_$i_atfl_cutoff.smc.gz;
#wait;
#docker run --rm -v $PWD:/mnt terhorst/smcpp:latest plot atfl/plot_atfl_$i_cutoff.png atfl/model.final.json -c -g 6;
#done
